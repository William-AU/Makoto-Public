(function(){function e(e,t,a){var n=null;if("text"===e)return document.createTextNode(t);n=document.createElement(e);for(var i in t)if("style"===i)for(var l in t.style)n.style[l]=t.style[l];else if("className"===i)n.className=t[i];else if("event"===i)for(var l in t.event)n.addEventListener(l,t.event[l]);else n.setAttribute(i,t[i]);if(a)if("string"==typeof a)n.innerHTML=a;else if(Array.isArray(a))for(var r=0;r<a.length;r++)null!=a[r]&&n.appendChild(a[r]);return n}function t(){var e=[].slice.call(document.getElementsByClassName("timeago"));e.forEach(function(e){e.hasAttribute("datetime")&&(e.textContent=s.format(e.getAttribute("datetime")))})}function a(){var e=new RegExp(p.value);if(window.files)filteredFiles=files.filter(function(t){return e.test(t[3])}),i.apply({dataset:{page:1}});else{var t=document.querySelectorAll("[data-search]");[].slice.call(t).forEach(function(t){if(e.test(t.dataset.search))!t.children.length&&t.orig&&(t.parentNode.insertBefore(t.orig,t),t.remove());else if(t.children.length){var a=t.cloneNode(!1);a.orig=t,a.style.display="none",t.parentNode.insertBefore(a,t),t.remove()}}),img_lazyload()}}function n(){pages=Math.ceil(filteredFiles.length/600),[].slice.call(document.querySelectorAll(".pages")).forEach(function(t){for(;t.childNodes.length;)t.childNodes[0].remove();t.appendChild(e("input",{type:"button",value:"<<",event:{click:i},"data-page":1})),t.appendChild(e("input",{type:"button",value:"<",event:{click:i},"data-page":page-1})),t.appendChild(e("text"," "+page+"/"+pages+" ")),t.appendChild(e("input",{type:"button",value:">",event:{click:i},"data-page":page+1})),t.appendChild(e("input",{type:"button",value:">>",event:{click:i},"data-page":pages})),page<=2&&(t.children[0].disabled=!0),page<=1&&(t.children[1].disabled=!0),page>pages-1&&(t.children[2].disabled=!0),page>pages-2&&(t.children[3].disabled=!0)})}function i(){var t=parseInt(this.dataset.page);if(!isNaN(t)){page=t,n();var a=600*(page-1);[].slice.call(document.querySelectorAll(".item")).forEach(function(t){for(;t.childNodes.length;)t.childNodes[0].remove();if(t.style.display="none",t.removeAttribute("data-search"),filteredFiles[a]){var n=filteredFiles[a],i=e("span",{className:"item","data-search":n[3]},[e("a",{href:n[0]},[e("img",{_src:n[0]+"@w200",alt:n[0],title:n[0]})]),e("br"),e("span",{className:"name","data-original":n[0]},[e("text",n[0])]),e("br"),e("span",{className:"datetime hoveritem"},[e("span",{className:"normal timeago",datetime:"20"+n[1]+" +0800"},[e("text",n[1])]),e("span",{className:"hover"},[e("text",n[1])])]),e("text","ã€€"+n[2])]);t.parentNode.replaceChild(i,t)}a++}),l()}}function l(){document.getElementById("show-name").dispatchEvent(new Event("change")),img_lazyload(),t()}var r="en";/zh/i.test(navigator.language)&&(r="zh_CN");var o=function(e){return(e<10?"0":"")+e},s={format:function(e){e=new Date(e);var t=e.getTime(),a=Date.now(),n=a;if(n-=n%864e5+864e5,e.getFullYear()==(new Date).getFullYear()){if(e.getMonth()==(new Date).getMonth()){if(e.getDate()==(new Date).getDate())return o(e.getHours())+":"+o(e.getMinutes());if(t>n)return"Yesterday "+o(e.getHours())+":"+o(e.getMinutes());var i=Math.floor((a-t)/24/36e5);return i+" day"+(1==i?"":"s")+" ago"}return o(e.getMonth()+1)+"/"+o(e.getDate())}return(e.getFullYear()+"").substr(2)+"/"+o(e.getMonth()+1)+"/"+o(e.getDate())}};document.addEventListener("touchstart",function(){}),document.head.appendChild(e("style",{},[e("text","html{cursor:default}.hoveritem>.hover{display:none}.hoveritem:hover>.normal{display:none}.hoveritem:hover>.hover{display:inline}")])),setInterval(t,6e4);for(var d=document.getElementsByClassName("datetime");d.length;){var c=d[0],u=c.textContent;c.textContent="",c.appendChild(e("span",{className:"normal timeago",datetime:"20"+u+" +0800"},[e("text",u)])),c.appendChild(e("span",{className:"hover"},[e("text",u)])),c.className="hoveritem"}var p=document.getElementById("searchinput"),g=0;p.addEventListener("input",function(){clearTimeout(g),g=setTimeout(a,500)}),t(),window.filteredFiles&&document.querySelector(".pages")&&(n(),l())})();